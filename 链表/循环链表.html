<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

</body>
</html>
<script type="text/javascript">
	class Node {
	constructor(element) {
		this.element = element,
		this.next = null
	}
}
//构建双向链表数据结构
class CircularLikedList {
    constructor() {
        this.head = null;
        this.length = 0;
    }
    insert(position,element) {
    	const node = new Node(element)
    	//越界
    	if(position > -1 && position <= this.length) {
    		if (position == 0) {
    		    if (this.length == 0) {
    		    	this.head = node;
    		    	node.next = this.head;
    		    	this.length++
    		    }
    		    else {
    		    	let index = 0;
    		    	let current = this.head;
    		    	while(index < this.length) {
    		    		current = current.next;
    		    		index ++
    		    	}
    		    	node.next = this.head;
    		    	this.head = node;
    		    	current.next = this.head;
    		    	this.length++
    		    } 		  
    	    }
    	    else if(position == this.length) {
    	    	let index = 0;
    		    let current = this.head;
    	    	while(index < this.length -1){
    	    		current = current.next;
    		    	index ++
    	    	}
    	    	current.next = node;
    	    	node.next = this.head;
    	    	this.length++
    	    }
    	    else
    	    {
    		    let index = 0;
    		    let current = this.head;
    		    let pervious = null;
    		    while(index < position){
                    pervious = current
    			    current = current.next; //插入位置的下一个节点
    			    index++
    		    }
                pervious.next = node
    		    node.next = current; //新节点链接到后面的节点
    		    this.length++
    	    }
    	    
    	}
    }
    removeAt(position) {
    	if(position > -1 && position <= this.length) {
    		if (position == 0) {
    			if (this.length ==1 ) {
    				this.head = null;
    			}
    			else 
    			{
    				let index = 0;
    		    	let current = this.head;
    		    	this.head = current.next;
    			    while(index < this.length-1) {
    				    current =  current.next;
    				    index++
    			    }
    			    current.next = this.head
    			    this.length--;
    			}
    		}
    		else if(position == this.length-1) {
    			let index = 0;
    		    let current = this.head;
    			while(index < this.length-2) {
    				current =  current.next;
    				index++
    			} 
    			current.next = this.head; 
    			this.length--
    		}
    		else {
    			let index = 0;
    		    let current = this.head;
    		    let pervious = null
    			while(index < this.length-2) {
    				pervious = current
    				current =  current.next;
    				index++
    			} 
    			pervious.next = current.next 
    			this.length--
    		}
    	}

    }
}
const cirlist = new CircularLikedList()
cirlist.insert(0,1); //1

cirlist.insert(0,8);//8 1

cirlist.insert(2,18); //8 1 18

cirlist.insert(1,0); // 8 0 1 18

cirlist.insert(2,7); // 8 0  7 1 18
console.log(cirlist.head,cirlist.length)

cirlist.removeAt(0)

cirlist.removeAt(3)
cirlist.removeAt(1)
console.log(cirlist.head,cirlist.length)
</script>